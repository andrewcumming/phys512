

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Homework 2: Common Issues &#8212; PHYS 512 Computational Physics with Applications</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'homework_notes/hw2_common_issues';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Homework 2 solutions" href="../HW2_solutions.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/plasma.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/plasma.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">About the course</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../outline.html">Course outline</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../basics.html">Getting set up</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming.html">Programming best practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../floats.html">Floating point arithmetic</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Manipulating functions</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../derivatives.html">Derivatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interpolation.html">Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration.html">Integration</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../function_solutions.html">Solutions to exercises</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../derivatives_solutions.html">Derivatives exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interpolation_solutions.html">Interpolation exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration_solutions.html">Integration exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Random numbers</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../random.html">Random numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lcg.html">Linear Congruential Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generating_random.html">Probability distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monte_carlo_integration.html">Monte Carlo integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metropolis.html">Metropolis-Hastings algorithm</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../random_solutions.html">Solutions to exercises</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../prob_distributions_solutions.html">Probability distributions Exercise 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prob_distributions_solutions_part2.html">Probability distributions Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../montecarlo_solutions.html">Monte Carlo Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metropolis_solutions.html">Metropolis-Hastings</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Solving equations</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../matrices.html">Matrices in numpy</a></li>

<li class="toctree-l1"><a class="reference internal" href="../linear_least_squares.html">Linear least squares</a></li>
<li class="toctree-l1"><a class="reference internal" href="../polynomial_fit.html">Polynomial fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nonlinear.html">Non-linear least squares</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Homework</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../hw1.html">Homework 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hw2.html">Homework 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hw3.html">Homework 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_instructions.html">Project Instructions</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../homework_solutions.html">Homework solutions</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../HW1_solutions.html">Homework 1 solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../HW2_solutions.html">Homework 2 solutions</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Homework 2: Common Issues</a></li>














</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/andrewcumming/phys512" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/andrewcumming/phys512/issues/new?title=Issue%20on%20page%20%2Fhomework_notes/hw2_common_issues.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/homework_notes/hw2_common_issues.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Homework 2: Common Issues</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Homework 2: Common Issues</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#probem-1-a">Probem 1 a)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proportionality-is-not-equality">Proportionality is not Equality</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-and-naming-of-files">Data and Naming of Files</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#log-log-plots">Log-Log Plots</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#discussions">Discussions</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#plots-axis-labels-legends">Plots: Axis Labels, Legends</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#notebook-clutter">Notebook Clutter</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#monster-cells">Monster Cells</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#re-evaluate-notebooks-from-a-cold-start">Re-Evaluate Notebooks from a Cold Start</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#quantitative-statements-measure-don-t-just-claim">Quantitative Statements: Measure, don’t just Claim</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#arrays-while-and-list-comprehensions">Arrays, While and List-Comprehensions</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#chemical-potential">Chemical Potential</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overflows">Overflows</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extrapolation">Extrapolation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#integration">Integration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#range">μ Range</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sources-of-error">Sources of Error</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#temperature-and-units">Temperature and Units</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#absolute-vs-relative-errors">Absolute vs. Relative Errors</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#style-issues">Style Issues</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#action-at-a-distance">Action at a Distance</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-are-globals-ok">When are globals ok?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unused-or-trivial-variables">Unused or Trivial Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dry-don-t-repeat-yourself">DRY: Don’t repeat yourself</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#names">Names</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#astropy">Astropy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comments">Comments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#whitespace-and-empty-lines">Whitespace and Empty Lines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formatting">Formatting</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="homework-2-common-issues">
<h1>Homework 2: Common Issues<a class="headerlink" href="#homework-2-common-issues" title="Permalink to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section was written by Valentin Boettcher, the TA who graded homework 2.</p>
</div>
<p>First of all: You all did a great job. Almost all codes I received were ran without modification (except for the missing <code class="docutils literal notranslate"><span class="pre">hw2_data.txt</span></code>, see below). My feedback on myCourses may sound overly negative. This is because I mostly documented the reasons for deducting points due to time constraints. Furthermore, some suggestions below may seem a little pedantic. This is certainly not a software-engineering course. See my suggestions more as general tips and not as strict requirements.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="probem-1-a">
<h1>Probem 1 a)<a class="headerlink" href="#probem-1-a" title="Permalink to this heading">#</a></h1>
<p>The formulation “Explain why” may have been slightly ambiguous. My interpretation of that was: “show that”. There are two sides to the issue. I will use the Simpson rule as an Illustration. First, we subdivide the integration interval into pieces of length <span class="math notranslate nohighlight">\(Δx\)</span> and Taylor-expand the integrand in each sub-interval (assuming that the radius of convergence of the expansion is smaller than <span class="math notranslate nohighlight">\(Δx\)</span>):</p>
<div class="math notranslate nohighlight" id="equation-taylor">
<span class="eqno">(7)<a class="headerlink" href="#equation-taylor" title="Permalink to this equation">#</a></span>\[f(x) = f(x_i) + f'(x_i) (x-x_i) + f''(x_i) \frac{(x-x_i)^2}{2} + D\cdot (x-x_i)^3+ \mathcal{O}(|x-x_i|^4)\hspace{1cm} x_i\leq x\leq x_{i+1}.\]</div>
<p>Why did I include the third order term in the above? In principle, we could have absorbed that into the error term (adjusting its order accordingly). However, our analysis needs the precise form of the error term to this order as, we will see later.</p>
<p>Now, <a class="reference internal" href="#equation-taylor">(7)</a> is not quite what we want yet. As we integrate over a double interval (see <a class="reference internal" href="../integration.html"><span class="doc">Integration</span></a>) the linear term vanishes (analytically!), but we still need the second derivative at <span class="math notranslate nohighlight">\(x_i\)</span>. Therefore we <em>approximate</em> the second derivative as</p>
<div class="math notranslate nohighlight" id="equation-num-deriv">
<span class="eqno">(8)<a class="headerlink" href="#equation-num-deriv" title="Permalink to this equation">#</a></span>\[{d^2f\over dx^2}(x_i) = {f(x_i+\Delta x) -2 f(x_i) + f(x_i-\Delta x)\over (\Delta x)^2} + \mathcal{O}\left(|\Delta x|^2\right).\]</div>
<div class="admonition-landau-s-trashcan admonition">
<p class="admonition-title">Landau’s Trashcan</p>
<p>Here, I employ the <a class="reference external" href="https://en.wikipedia.org/wiki/Big_O_notation">Big O Notation</a>.
We say <span class="math notranslate nohighlight">\(f(x) = g(x) + \mathcal{O}(h(x))\)</span> for <span class="math notranslate nohighlight">\(x\to a\)</span> (omitted if <span class="math notranslate nohighlight">\(a=0\)</span>) iff there exists a <span class="math notranslate nohighlight">\(M&gt;0\)</span> for a certain range around <span class="math notranslate nohighlight">\(x_i\)</span> such that</p>
<div class="math notranslate nohighlight">
\[ \lim_{x\to a} \frac{|f(x)-g(x)|}{h(x)} = M&lt;∞.\]</div>
<p>For a truncated Taylor series (<span class="math notranslate nohighlight">\(h(x)=|x-x_0|^n\)</span>) this fact is quite obvious, as the Taylor expansion continues with terms <span class="math notranslate nohighlight">\(\sim (x-x_i)^n\)</span>.</p>
<p>When we quantify the asymptotic error for <span class="math notranslate nohighlight">\(x\to a\)</span> we can replace the error term with <span class="math notranslate nohighlight">\(M h(x)\)</span>. This discussion of the Big O may seem a little overkill, but I thought it might be useful, as it comes up quite often. In my analysis course, it was actually used to define the derivative.</p>
<p>The nice thing about “Landau’s Trashcan” is that we can use an <span class="math notranslate nohighlight">\(=\)</span> sign rather than some ill defined <span class="math notranslate nohighlight">\(\approx\)</span>. We can conventiently manipulate the Big O (see the Wikipedia link above), without worrying about details.</p>
</div>
<p>Putting <a class="reference internal" href="#equation-taylor">(7)</a> and <a class="reference internal" href="#equation-num-deriv">(8)</a> together, we get (note the equals sign)</p>
<div class="math notranslate nohighlight">
\[f(x) = f(x_i) + f'(x_i) (x-x_i) + \left[{f(x_i+\Delta x) -2 f(x_i) + f(x_i-\Delta x)\over (\Delta x)^2} + \mathcal{O}\left(|\Delta x|^2\right) \right] \frac{(x-x_i)^2}{2} + D \cdot(x_i - x)^3 + \mathcal{O}(|x-x_i|^4)\hspace{1cm} x_i\leq x\leq x_{i+1}.\]</div>
<p>We are only interested in the error terms, so let’s throw the rest away</p>
<div class="math notranslate nohighlight">
\[f(x)-f_{\mathrm{approx}}(x) = \mathcal{O}\left(|\Delta x|^2\right)  \frac{(x-x_i)^2}{2} + D\cdot (x_i - x)^3 + \mathcal{O}(|x-x_i|^4).\]</div>
<p>As we will integrate our approximated function over the interval <span class="math notranslate nohighlight">\([x_{i-1},x_{i+1}]\)</span>, the difference between the exact integral and our approximation will work out to</p>
<div class="math notranslate nohighlight">
\[Δ I_n = \int_{x_{i-1}}^{x_{i+1}}  (f(x)-f_{\mathrm{approx}}(x)) \mathrm{d}x\]</div>
<div class="math notranslate nohighlight">
\[=\int_{x_{i-1}}^{x_{i+1}}  \left[\mathcal{O}\left(|\Delta x|^2\right)  \frac{(x-x_i)^2}{2} + D\cdot (x_i - x)^3 + \mathcal{O}(|x-x_i|^4)\right] \mathrm{d}x\]</div>
<div class="math notranslate nohighlight">
\[=\mathcal{O}\left(|\Delta x|^2\right)  \frac{(2Δx)^3}{6} + D\cdot 0 + \mathcal{O}(|2Δx|^5)\]</div>
<div class="math notranslate nohighlight">
\[= \mathcal{O}\left(|\Delta x|^5\right)\]</div>
<p>Due to the symmetry of the integrand, the <span class="math notranslate nohighlight">\(D\)</span> term vanished. Note that here <span class="math notranslate nohighlight">\(\mathcal{O}(Δx)\)</span> <em>does not</em> depend on <span class="math notranslate nohighlight">\(x\)</span>, whereas <span class="math notranslate nohighlight">\(\mathcal{O}(|x-x_i|^4)\)</span> does. One of the terms came from the approximation of the derivative and the other came from the Taylor series. We see now that a better numerical approximation for the second derivative would not have been useful, as the largest error term would still be <span class="math notranslate nohighlight">\(\mathcal{O}(|x-x_i|^5)\)</span>.</p>
<p>In the final step, we summ over all sub-intervals, which corresponds to multiplying our error term by <span class="math notranslate nohighlight">\(N \sim (Δx)^{-1}\)</span> leaving us with an error of <span class="math notranslate nohighlight">\(N \mathcal{O}\left(|\Delta x|^5\right) = \mathcal{O}\left(|\Delta x|^4\right)\)</span>.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="proportionality-is-not-equality">
<h1>Proportionality is not Equality<a class="headerlink" href="#proportionality-is-not-equality" title="Permalink to this heading">#</a></h1>
<p>As can be ascertained from our discussion of the Big-O above, the notation <span class="math notranslate nohighlight">\(\mathcal{O}((\Delta x)^4)\)</span> can be interpreted as “for <span class="math notranslate nohighlight">\(Δx\)</span> sufficiently small, the error is <strong>proportional to</strong> <span class="math notranslate nohighlight">\((Δx)^n\)</span>”. The error term is in general not equal to <span class="math notranslate nohighlight">\((Δx)^n\)</span>. The proportionality constant is arbitrary and may not be on the order of <span class="math notranslate nohighlight">\(1\)</span>, except by accident. It may even be zero, in which case our error term was estimated too strictly. I believe that the more precise definition given above is more suitable when thinking about the Big-O.</p>
<p>I deducted points where errors were equated with <span class="math notranslate nohighlight">\((Δx)^n\)</span>, as this assumption can lead to dangerous overconfidence in results.</p>
<p>So what do we do, when we <em>know</em> how the error scales with <span class="math notranslate nohighlight">\(\Delta x\)</span>? We calculate the value in question for two different <span class="math notranslate nohighlight">\(\Delta x\)</span> and cancel out the proportionality constant, just as in Problem 1b.</p>
<p>This method could have been applied to quantify the interpolation error in Problem 2b.</p>
<p>In problem 2b, we have two different error estimates that are of order <span class="math notranslate nohighlight">\(\mathcal{O}((\Delta x)^2)\)</span> and <span class="math notranslate nohighlight">\(\mathcal{O}((\Delta x)^4)\)</span> respectively. Now, if I make the (maybe not even reasonable) assumption that the proportionality constants are equal in both cases, we can observe that the error for the trapezoidal rule is indeed two orders of magnitude above the error of the simpson rule.</p>
<div class="admonition-and-now-repeat-after-me admonition">
<p class="admonition-title">And now: Repeat after me!</p>
<p>Proportionality is <em>not</em> equality.</p>
</div>
<p>Further, keep in mind that if <span class="math notranslate nohighlight">\(\Delta x\)</span> is not “small” anymore, the error may scale in arbitrary ways! Thus, we often need to use many datapoints to find out what “small” means :).</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="data-and-naming-of-files">
<h1>Data and Naming of Files<a class="headerlink" href="#data-and-naming-of-files" title="Permalink to this heading">#</a></h1>
<p>The code you submit has to run <em>without modification</em> on our machines. Most of you did not include <code class="docutils literal notranslate"><span class="pre">hw2_data.txt</span></code> in the repository, or even loaded the file directly from their download directory. Please include data in the future, especially if it is a <em>small</em> plain-text file!</p>
<p>Also, why do so many of you give your files such cryptic names. A simple structure like <code class="docutils literal notranslate"><span class="pre">homework_01/problem_01.nb</span></code> would do the trick. You don’t need redundancy like <code class="docutils literal notranslate"><span class="pre">homework_1/hw1_p1.nb</span></code> et cetera.</p>
<p>I believe it is most sensible to have <strong>one notebook per problem</strong> as this avoids overriding variables by accident. Also, large notebooks are pretty rough on my poor laptop.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="log-log-plots">
<h1>Log-Log Plots<a class="headerlink" href="#log-log-plots" title="Permalink to this heading">#</a></h1>
<p>For error-terms that scale with some small quantity, a log-log plot is ideal.
Polynomial scaling will manifest as a straight line with the slope being equal to the leading power of the polynomial. Note that a curve like <span class="math notranslate nohighlight">\(x^n+1\)</span> will <em>not</em> be a straight line, so that you can detect when an error does not converge to zero.</p>
<p>One thing that you should consider when plotting on a logarithmic x-axis (such as in a log-log plot) is that you x-values should be exponentially spaced so that they’ll <em>appear</em> linearly spaced on the plot. Otherwise, the uneven spacing makes it <em>very</em> hard to fit or eyeball the scaling. See <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.logspace.html">numpy.logspace</a>.</p>
<div class="admonition-histograms admonition">
<p class="admonition-title">Histograms</p>
<p>For histograms, you can pass an array as the <code class="docutils literal notranslate"><span class="pre">bins</span></code> argument to <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot.hist</span></code>. Using the output of <code class="docutils literal notranslate"><span class="pre">logspace</span></code> as the definition for the bins will give you lovely, uniformly-looking bins in a log-log histogram.</p>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="discussions">
<h1>Discussions<a class="headerlink" href="#discussions" title="Permalink to this heading">#</a></h1>
<p>Providing a discussion for <em>every</em> result you obtain is very important. Sometimes the output of you code doesn’t really speak for itself, or the code is hard to understand. Further, the TAs can’t read you mind! Having something there in natural language is always a plus and helps us give points when in doubt.</p>
<p>Even when the result is wrong, and you discuss that in some way, we can still give 2 (or sometimes even 3) points :).</p>
<p>In problem 3c some of you only printed a number or showed a plot. I have not deducted points where the result was <em>unambiguously correct</em> and there was no discussion. However, meant was that you (in addition to your code) should compare the statistical and the analytical result.</p>
<p>Another example is problem 2b, where some plots clearly showed that there was something wrong with the sampled distribution. Without a discussion it is hard not to deduct a point, as it is not clear whether the student realized, that something is wrong.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="plots-axis-labels-legends">
<h1>Plots: Axis Labels, Legends<a class="headerlink" href="#plots-axis-labels-legends" title="Permalink to this heading">#</a></h1>
<p>Plots should always have axis labels (on <strong>all</strong> axes), except when
those labels would have absolutely no meaning (such as plotting the
value of a dimensionless quantity without name).</p>
<p>When plotting multiple lines, please make them visually distinct and add a legend where <em>all</em> lines show up. On the other hand, if there is only one line in the plot a legend is redundant.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="notebook-clutter">
<h1>Notebook Clutter<a class="headerlink" href="#notebook-clutter" title="Permalink to this heading">#</a></h1>
<p>Please don’t leave clutter in you notebooks. By clutter, I mean:</p>
<ul class="simple">
<li><p>remnants of numerical experiments that are <em>not</em> required for the solution of a problem</p></li>
<li><p>large chunks of commented-out code</p></li>
<li><p>copy pasted code output</p></li>
</ul>
<p>This stuff makes it harder to read through the solution.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="monster-cells">
<h1>Monster Cells<a class="headerlink" href="#monster-cells" title="Permalink to this heading">#</a></h1>
<p>Don’t try to do too many things in one cell. If you have to distinguish print outputs by adding extra strings to the output, you might want to split that code into multiple cells. (Of course, the opposite extreme is also undesirable…)</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="re-evaluate-notebooks-from-a-cold-start">
<h1>Re-Evaluate Notebooks from a Cold Start<a class="headerlink" href="#re-evaluate-notebooks-from-a-cold-start" title="Permalink to this heading">#</a></h1>
<p>One problem that comes with interactive coding styles is that often some global variable is defined and then removed from the code at a later point.</p>
<p>For example you might at first write something like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">k_B</span> <span class="o">=</span> <span class="mf">1.380649e-23</span>


<span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">k_B</span><span class="p">)</span>
</pre></div>
</div>
<p>and then later remove the definition of <code class="docutils literal notranslate"><span class="pre">k_B</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">k_B</span><span class="p">)</span>
</pre></div>
</div>
<p>As long as the session in which the variable was defined is still active you can use the variable all you like. However, when we TAs run your code it won’t work, as now the variable has never been defined.</p>
<p>There are multiple issues with the code above that we’ll get into below.</p>
<p><strong>So please restart jupyter and check whether your code still runs.</strong></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="quantitative-statements-measure-don-t-just-claim">
<h1>Quantitative Statements: Measure, don’t just Claim<a class="headerlink" href="#quantitative-statements-measure-don-t-just-claim" title="Permalink to this heading">#</a></h1>
<p>I often deducted a point for answers to question 3c) that showed a log-log plot of the error scaling and then claimed that the error scaled in some weird way (like <span class="math notranslate nohighlight">\(N^{-7\over 2}\)</span> for example) in the discussion. Usually, there was no reference line in the log-log plot to support such a claim.</p>
<p>The correct answer was <span class="math notranslate nohighlight">\(N^{-1/2}=1/\sqrt{N}\)</span>. Some people fitted a polynomial to the error curve (nice!), but even drawing <span class="math notranslate nohighlight">\(1/\sqrt{N}\)</span> into the same plot would have sufficed.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="arrays-while-and-list-comprehensions">
<h1>Arrays, While and List-Comprehensions<a class="headerlink" href="#arrays-while-and-list-comprehensions" title="Permalink to this heading">#</a></h1>
<p>Use arrays whenever possible. Loops are slow in python. Everything is slow in python. You want to use as much of numpy’s C backend as possible.</p>
<p>As a side note: <code class="docutils literal notranslate"><span class="pre">while</span></code>-loops are just as bad as <code class="docutils literal notranslate"><span class="pre">for</span></code>-loops. List comprehensions are also loops!</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="chemical-potential">
<h1>Chemical Potential<a class="headerlink" href="#chemical-potential" title="Permalink to this heading">#</a></h1>
<section id="overflows">
<h2>Overflows<a class="headerlink" href="#overflows" title="Permalink to this heading">#</a></h2>
<p>Many, many people encountered overflows in problem 2. These came from the exponential in the denominator of the integrand. Although the effects were rather benign in this case, one should never dismiss such warnings <em>without a discussion</em>.</p>
<p>Note also, that these problems could be mitigated by rewriting</p>
<div class="math notranslate nohighlight">
\[ \frac{1}{1 + e^{x}} = \frac{e^{-x}}{e^{-x} + 1}.\]</div>
<p>Playing with the integration range can be a solution too, although a dangerous one.</p>
</section>
<section id="extrapolation">
<h2>Extrapolation<a class="headerlink" href="#extrapolation" title="Permalink to this heading">#</a></h2>
<p>The spline extrapolation does not have any physical motivation apart
from smoothness. Do not expect correct, physical results from it.</p>
</section>
<section id="integration">
<h2>Integration<a class="headerlink" href="#integration" title="Permalink to this heading">#</a></h2>
<p>The integration routine <code class="docutils literal notranslate"><span class="pre">scipy.integrate.quad</span></code> is a fine tool. It is adaptive, gives you an error estimate and <strong>can handle infinite integration ranges</strong>.</p>
<p>Nobody seemed to have realized, that one can actually pass target errors (absolute and relative) as arguments.</p>
</section>
<section id="range">
<h2>μ Range<a class="headerlink" href="#range" title="Permalink to this heading">#</a></h2>
<p>Many of you chose an <strong>insanely large</strong> range for <span class="math notranslate nohighlight">\(μ\)</span> and the resulting in a low resolution at <span class="math notranslate nohighlight">\(μ=0\)</span>. This may be due to lack of physical intuition and I did not deduct points solely for a bad range.</p>
<p>What is the chemical potential? It measures how much energy relative to <span class="math notranslate nohighlight">\(k_B T\)</span> it takes to change the particle number of the system by one, while keeping the temperature constant. As <span class="math notranslate nohighlight">\(k_B T\)</span> is roughly the mean energy per degree of freedom, we wouldn’t expect this energy to be much more than around <span class="math notranslate nohighlight">\(10 k_B T\)</span>.</p>
<p>Beyond those limits, the integral also simplifies enormously and yields the (non)degenerate limits. The region where a numerical approach is interesting, is precisely where these limits don’t hold. Here this range was roughly <span class="math notranslate nohighlight">\(-2.7 \leq μ \leq 9\)</span>.</p>
</section>
<section id="sources-of-error">
<h2>Sources of Error<a class="headerlink" href="#sources-of-error" title="Permalink to this heading">#</a></h2>
<p>The two (major) sources of numerical error in the calculation are the integration and the interpolation. The integration error can be obtained from the output of <code class="docutils literal notranslate"><span class="pre">quad</span></code>.</p>
<p>The interpolation error (see <a class="reference internal" href="../interpolation.html"><span class="doc">Interpolation</span></a>) also scales polynomial in the grid density. Therefore, a similar formula to the one proposed in problem 1b can be employed. The crucial point here is, that the error is <strong>not equal</strong>, but <strong>proportional</strong> to <span class="math notranslate nohighlight">\((\Delta x)^n\)</span>. To determine the constant of proportionality, at least two different <span class="math notranslate nohighlight">\(\Delta x\)</span> have to be used. Comparing the interpolation the integral at selected points incorporates the integration error into the procedure and very much depends on how these additional points are chosen.</p>
<p>Errors, if treated as standard deviations of random variables, are added as</p>
<div class="math notranslate nohighlight">
\[\epsilon_\mathrm{tot} = \sqrt{\sum_n \epsilon_n^2}\]</div>
<p>and should ideally be compared to the absolute value of the integral (see below).</p>
</section>
<section id="temperature-and-units">
<h2>Temperature and Units<a class="headerlink" href="#temperature-and-units" title="Permalink to this heading">#</a></h2>
<p>The final, simplified form of the integrand is (with <span class="math notranslate nohighlight">\(x=\epsilon/ k_BT\)</span>, <span class="math notranslate nohighlight">\(\alpha=\mu/k_BT\)</span>)</p>
<div class="math notranslate nohighlight">
\[{N\over Vn_Q} = {4\over\sqrt{\pi}} \int_0^\infty {x^{1/2} dx\over e^{x-\alpha}+1}.\]</div>
<p>The left-hand side is conveniently non-dimensional, as is everything on the right-hand side.
In fact <span class="math notranslate nohighlight">\(k_B T = 1\)</span> and <span class="math notranslate nohighlight">\(n_Q = 1\)</span> define our unit system in this case (we measure <span class="math notranslate nohighlight">\(n=N/V\)</span> in units of <span class="math notranslate nohighlight">\(n_Q\)</span>).
Any change in temperature can be treated by re-scaling the units without re-evaluating the integral! Therefore, temperature is not an independent parameter here.</p>
<p>It is useful to get rid of units in numerical code. This leads to fewer pre-factor errors, fewer redundancies and to better numerical stability (things are close to 1 where the floating point numbers are densest). The computer does not know about units and that’s why it feels so awkward to work with them. You may find the library <a class="reference external" href="https://pint.readthedocs.io/en/stable/">pint</a> useful.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="absolute-vs-relative-errors">
<h1>Absolute vs. Relative Errors<a class="headerlink" href="#absolute-vs-relative-errors" title="Permalink to this heading">#</a></h1>
<p>Be careful about how you discuss numerical errors. The absolute error (not to be confused with the absolute value of an error) is most meaningful when it can actually be related to something measurable.</p>
<p>When comparing values of wildly varying magnitudes or with some arbitrary units unknown to the TA, then stating a relative error is best.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="style-issues">
<h1>Style Issues<a class="headerlink" href="#style-issues" title="Permalink to this heading">#</a></h1>
<p>Although a programming language like python gives us a lot of freedom in how we accomplish a task, there are some style conventions that can make our life much easier.</p>
<p>It’s like cleaning the dishes right after using them: It’s more effort in the short term; but at least you won’t have to share your apartment with tons of bugs and work harder later to chisel the dried up food remnants off your plates.</p>
<p>In the following we will review some common stylistic issues, that came up in the solutions to <code class="docutils literal notranslate"><span class="pre">HW2</span></code>.</p>
<p>There are tools that can help you with many of those issues (<a class="reference external" href="https://github.com/python-lsp/python-lsp-server">python language server</a>, any decent editor (emacs, vscode)). Formatting is a solved problem: <a class="reference external" href="https://github.com/psf/black">black</a>, <a class="reference external" href="https://github.com/hhatto/autopep8">autopep8</a>.</p>
<section id="action-at-a-distance">
<h2>Action at a Distance<a class="headerlink" href="#action-at-a-distance" title="Permalink to this heading">#</a></h2>
<p>There is a reason, while almost every programming guide and language documentation <strong>strongly discourages</strong> the use of global variables. What is a global variable? Any variable that is not defined within the function or as an object member (in python). Please see <a class="reference external" href="https://docs.python.org/3/tutorial/classes.html#python-scopes-and-namespaces">the python documentation on scope</a>.</p>
<p>Let’s revisit the example from above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">k_B</span> <span class="o">=</span> <span class="mf">1.380649e-23</span>


<span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">k_B</span>
</pre></div>
</div>
<p>If you do something like that, please keep the definition of <code class="docutils literal notranslate"><span class="pre">k_B</span></code> in the same cell! Otherwise it might end up somewhere far removed from the code it affects and that makes the code extremely hard to reason about.</p>
<p>In this case <code class="docutils literal notranslate"><span class="pre">k_B</span></code> might reasonably be expected to be a constant, but you might later decide to set it to unity. Sometimes I see variables like <code class="docutils literal notranslate"><span class="pre">x_vals</span></code> or similar with extremely generic names. Those are prone to being redefined often.</p>
<p>A simple fix in this case would be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function_local</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">k_B</span> <span class="o">=</span> <span class="mf">1.380649e-23</span>

    <span class="k">return</span> <span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">k_B</span>
</pre></div>
</div>
<p>Another possibility would be to define some global constants in a cell at the beginning of the notebook or in some other well specified place. Python has no constant variables, but the convention is to make constants <code class="docutils literal notranslate"><span class="pre">UPPER_CASE</span></code>. So you could call <code class="docutils literal notranslate"><span class="pre">k_B</span></code>, or something similar <code class="docutils literal notranslate"><span class="pre">BLOTZMANN</span></code>. The best solution is to use <code class="docutils literal notranslate"><span class="pre">scipy.constants.Boltzmann</span></code> in the example above.</p>
<p>There are even cases where global variables give worse performance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">global_var</span> <span class="o">=</span> <span class="mi">10</span>


<span class="k">def</span> <span class="nf">work</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">):</span>
        <span class="mi">10</span> <span class="o">*</span> <span class="n">global_var</span>


<span class="k">def</span> <span class="nf">work_local</span><span class="p">():</span>
    <span class="n">local_var</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">):</span>
        <span class="mi">10</span> <span class="o">*</span> <span class="n">local_var</span>


<span class="o">%</span><span class="n">timeit</span> <span class="n">work</span><span class="p">()</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">work_local</span><span class="p">()</span>
</pre></div>
</div>
<p>Run that code on your machine. I get the output</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>2.15 ms ± 23.8 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

1.75 ms ± 22 µs per loop (mean ± std. dev. of 7 runs, 1,000 loops each)
</pre></div>
</div>
<p>Also, make it explicit what your function operates upon.
In this example, it is nonsensical to define a function (don’t even worry that this function is pretty pointless and should be replaced by <code class="docutils literal notranslate"><span class="pre">numpy.arange</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fill_values</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)):</span>
        <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
</pre></div>
</div>
<p>It might allow you to fill you <code class="docutils literal notranslate"><span class="pre">values</span></code> more than once, but other than that it is just confusing.</p>
<p>As a first fix, this would be acceptable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fill_values</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)):</span>
        <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>

    <span class="k">return</span> <span class="n">values</span>
</pre></div>
</div>
<p>Now, we can call <code class="docutils literal notranslate"><span class="pre">fill_values</span></code> everywhere we want, even far away from its definition, and we can still understand what the function does. Everything that is required to understand this function is local to it! You might even decide to augment its behavior later, or to implement it in a completely different way. The semantics are clear: data in, data out. We don’t care where it comes from and where it may go.</p>
<p>Be aware that <code class="docutils literal notranslate"><span class="pre">fill_values</span></code> will actually modify its argument. If you want to prevent that, you can do something like</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fill_values</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)):</span>
        <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>

    <span class="k">return</span> <span class="n">values</span>
</pre></div>
</div>
<p>You may object that our use of <code class="docutils literal notranslate"><span class="pre">range</span></code> or <code class="docutils literal notranslate"><span class="pre">len</span></code>, or indeed calling any other function inside our function constitutes some sort of nonlocality/action-at-a-distance. Let me counter this by reminding you that these functions ideally do something that we can understand just by looking at their names. They operate in a way that is <em>easy to understand</em>: i give them some data, they’ll give me some data back (well, well, I won’t get into the details here, but look up “pure functions”).</p>
<section id="when-are-globals-ok">
<h3>When are globals ok?<a class="headerlink" href="#when-are-globals-ok" title="Permalink to this heading">#</a></h3>
<p>This is optional reading :).</p>
<p>Jupyter notebooks are great as a <em>front-end</em> to your code. Code cells are great for defining the parameters and input data for your algorithms. Additionally, their output format is ideal for presenting results and plotting graphics.</p>
<p>A rule of thumb is that your code should accept all input data as arguments and define the rest locally and just pass it around. Then in a notebook cell you can call your algorithms like</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">temperatures</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">mass</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">tolerance</span> <span class="o">=</span> <span class="mf">1e-8</span>

<span class="n">energies</span> <span class="o">=</span> <span class="n">thermal_energy</span><span class="p">(</span><span class="n">temperatures</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">thermal_energy</span></code> might define auxiliary arrays or other variables internally. However, we will never need to worry about them :), as they’re locally. I have not given a definition of that function, as we really don’t need to worry about it :P.</p>
<p>And then a cell close by (or even the same cell) might plot the result:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">temperatures</span><span class="p">,</span> <span class="n">energies</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=...</span><span class="p">)</span>
</pre></div>
</div>
<p>You can use variables in more than one cell. Just make sure that they are not too far away from each other and that the variables have <em>sensible</em> names so that you can easily reason about them.</p>
<p>For “generic” variables like <code class="docutils literal notranslate"><span class="pre">xs</span> <span class="pre">=</span> <span class="pre">np.linpspace(...)</span></code> I’d strongly recommend limiting their use to the cell where they are defined.</p>
<p>Sometimes, a collection of parameters might turn up again and again. If you don’t want to define all your functions with the same arguments over and over (which makes it hard to maintain), you can collect your parameters in a dictionary, or slightly nicer, like a <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">dataclass</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Particle</span><span class="p">:</span>
    <span class="n">mass</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">position</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
    <span class="n">velocity</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>


<span class="k">def</span> <span class="nf">kinetic_energy</span><span class="p">(</span><span class="n">particle</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm2</span><span class="p">(</span><span class="n">particle</span><span class="o">.</span><span class="n">velocity</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">mass</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
<p>You could even choose to work in an object-oriented style, but personally I prefer to separate data and algorithms. You might also be tempted to put all you code into a class, but beware: member variables are globals in disguise. If you every only create one instance of a class, you probably don’t need one in the first place.</p>
<div class="admonition-module-notebook-style admonition">
<p class="admonition-title">Module-Notebook Style</p>
<p>You can also write <a class="reference external" href="https://docs.python.org/3/tutorial/modules.html">python modules</a> and import them into you notebook. This provides a nice separation between the implementation and the application to the problems in the homework. You still do the discussion and the evaluation of the code in the notebook, but you can use a proper editor and tools like formatters or linters to edit the modules.</p>
</div>
</section>
</section>
<section id="unused-or-trivial-variables">
<h2>Unused or Trivial Variables<a class="headerlink" href="#unused-or-trivial-variables" title="Permalink to this heading">#</a></h2>
<p>Sometimes I’ve seen something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">k_B</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>


<span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">some_argument</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">do_some_stuff</span> <span class="o">*</span> <span class="n">m</span> <span class="o">/</span> <span class="n">k_B</span>
</pre></div>
</div>
<p>If you’re choosing units where <code class="docutils literal notranslate"><span class="pre">k_B</span></code> is equal to unity, why do you put
that into the code? If this seems nontrivial to you, remark about it
in a docstring or comment. Also, you might be interested on <a class="reference external" href="https://en.wikipedia.org/wiki/Nondimensionalization">how to find even better units</a>.</p>
<p>Also, don’t compute things you won’t use, like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">expensive</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">expensive</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">a</span>
</pre></div>
</div>
<p>Also, keep in mind that you don’t have to perform the same task twice:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">expensive</span><span class="p">()</span>

    <span class="n">a</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">array</span> <span class="o">&lt;</span> <span class="n">expensive_too</span><span class="p">(</span><span class="n">array</span><span class="p">)]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">array</span> <span class="o">&gt;=</span> <span class="n">expensive_too</span><span class="p">(</span><span class="n">array</span><span class="p">)]</span>

    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
</pre></div>
</div>
<p>Rather, you could do something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">expensive</span><span class="p">()</span>

    <span class="n">mask</span> <span class="o">=</span> <span class="n">array</span> <span class="o">&lt;</span> <span class="n">expensive_too</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

    <span class="c1"># `~` is the `logical not` operator for arrays</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
</pre></div>
</div>
</section>
<section id="dry-don-t-repeat-yourself">
<h2>DRY: Don’t repeat yourself<a class="headerlink" href="#dry-don-t-repeat-yourself" title="Permalink to this heading">#</a></h2>
<p>If you realize that you just copy-pasted the same line for the third time you probably want
to define a function for that, or at least use a loop. Copy pasting produces longer and, more importantly, buggier code. If you want to change functionality or fix a bug, you have to do it <em>multiple times</em>.</p>
<p>A (rather mild) example would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">some_array</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">some_other_array</span>


<span class="n">x</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">2</span>
<span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">5</span>

<span class="n">y</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">2</span>
<span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">5</span>

<span class="c1"># and so on</span>
</pre></div>
</div>
<p>which could be improved as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">scale_elements</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
    <span class="n">array</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">2</span>
    <span class="n">array</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">5</span>

    <span class="c1"># python uses pass-by-reference so returning is optional in this case</span>
    <span class="k">return</span> <span class="n">array</span>


<span class="c1"># explicit style</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">scale_elements</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">scale_elements</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># implicit hackery: not very clear, discouraged</span>
<span class="nb">map</span><span class="p">(</span><span class="n">scale_elements</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">numpy.copy</span></code> when you don’t want to modify the argument to
a function and return a modified version.</p>
</section>
<section id="names">
<h2>Names<a class="headerlink" href="#names" title="Permalink to this heading">#</a></h2>
<p>Naming things is hard. But please try to be descriptive in your variable names. Today, we don’t have to conserve space on a punch-card; <a class="reference external" href="https://www.youtube.com/watch?v=FyCYva9DhsI">the great vowel shortage is over</a>!</p>
<p>So rather than <code class="docutils literal notranslate"><span class="pre">n_NQV</span></code>, something like <code class="docutils literal notranslate"><span class="pre">particle_density</span></code> can be understood at a glance.</p>
<p>Also, in python it is convention to use <code class="docutils literal notranslate"><span class="pre">snake_case</span></code> for variables and functions and <code class="docutils literal notranslate"><span class="pre">CamelCase</span></code> (capitalized!) only for classes and modules. An exception could be, if the thing your function does has a proper name, like <code class="docutils literal notranslate"><span class="pre">MaxwellBoltzmann</span></code>.</p>
</section>
<section id="astropy">
<h2>Astropy<a class="headerlink" href="#astropy" title="Permalink to this heading">#</a></h2>
<p>Using the constants from astropy is a bit of an overkill, especial in light of <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/constants.html">scipy.constants</a>.</p>
</section>
<section id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Permalink to this heading">#</a></h2>
<p>Comments are meant to explain code that doesn’t speak for itself or
performs a nontrivial task. Don’t write your code twice: once in English and once in python :).</p>
<p>A bad example would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># iterate over a range</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="c1"># set the jth element of y to 2</span>
    <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>The first comment states the obvious and the second one is subtly wrong.</p>
<p>If you comment your code, please do it for a nontrivial reason. If the comment is extremely short, you can comment on the same line, although having the comment on a separate line is recommended.</p>
<p>Here is an example of a nontrivial remark.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="c1"># start at index `2` as we skip the second (index `1`) element</span>
<span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">2</span>

<span class="c1"># LINE TOO LONG</span>
<span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">2</span> <span class="c1"># start at index `2` as we skip the second (index `1`) element</span>
</pre></div>
</div>
<p>For functions, python provides you with the wonderful tool of docstrings. Those allow you to say what the function does and which arguments it takes. This way you don’t even have to read the code later on if you just want to be reminded of what the code did.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate the baz value from the qux `foo` and the quux `bar`.</span>

<span class="sd">    Note that `foo` and `bar` can either be floats or numpy arrays.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># lot&#39;s of code</span>
    <span class="c1"># we don&#39;t need to know the details at this time...</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>If the docstring grows out of hand this could be a sign that your function does too many things. It is not uncommon, however, that the docstring is longer than the code.</p>
</section>
<section id="whitespace-and-empty-lines">
<h2>Whitespace and Empty Lines<a class="headerlink" href="#whitespace-and-empty-lines" title="Permalink to this heading">#</a></h2>
<p>If you wan’t to group bits of code together, you can fence them with empty lines. They come for free. However, be consistent in your use of white-space.</p>
<p>For example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">complicated</span><span class="p">()</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The result is: </span><span class="si">{</span><span class="n">result</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>is much easier to read than</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">complicated</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The result is: </span><span class="si">{</span><span class="n">result</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>or even (<em>please don’t do that</em>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#-----</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">complicated</span><span class="p">()</span>
<span class="c1">#----------------------------</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The result is: </span><span class="si">{</span><span class="n">result</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Please be consistent with you indentation levels too.</p>
</section>
<section id="formatting">
<h2>Formatting<a class="headerlink" href="#formatting" title="Permalink to this heading">#</a></h2>
<p>All the above may already touch on it, but code structures are <em>much easier to understand</em> if they are <em>consistently formatted</em>. That’s why there is the <a class="reference external" href="https://pep8.org/">PEP8</a>! That’s why every major python project you could contribute to on github has a style-guide (see <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">numpy</a> for an example).</p>
<p>Please don’t do things like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">first_array</span> <span class="o">=</span> <span class="n">some_stuff</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,:</span> <span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">second_array</span><span class="o">=</span>  <span class="n">whitespace_all_over_the_place</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">do_stuff</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">second_array</span><span class="p">):</span>
        <span class="n">do_more_stuff</span><span class="p">()</span>
</pre></div>
</div>
<p>Formatting is a solved problem, and you don’t have to do it yourself! For example, running <a class="reference external" href="https://github.com/psf/black">black</a> on it will give us</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">first_array</span> <span class="o">=</span> <span class="n">some_stuff</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="p">::</span><span class="mi">1</span><span class="p">]</span>
<span class="n">second_array</span> <span class="o">=</span> <span class="n">whitespace_all_over_the_place</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">do_stuff</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">second_array</span><span class="p">):</span>
    <span class="n">do_more_stuff</span><span class="p">()</span>
</pre></div>
</div>
<p>Jupyter-notebook code-cells <strong>do not replace a proper editor</strong> and formatting code consistently can be a painful, manual process. You could either use an editor like vscode or emacs that provide convenient wrapper around the code cells or try your luck with a <a class="reference external" href="https://github.com/Jupyter-contrib/jupyter_nbextensions_configurator/tree/master/src/jupyter_nbextensions_configurator/static/nbextensions_configurator">jupyter notebook extension</a> that does the formatting for you.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./homework_notes"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../HW2_solutions.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Homework 2 solutions</p>
      </div>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Homework 2: Common Issues</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#probem-1-a">Probem 1 a)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proportionality-is-not-equality">Proportionality is not Equality</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-and-naming-of-files">Data and Naming of Files</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#log-log-plots">Log-Log Plots</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#discussions">Discussions</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#plots-axis-labels-legends">Plots: Axis Labels, Legends</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#notebook-clutter">Notebook Clutter</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#monster-cells">Monster Cells</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#re-evaluate-notebooks-from-a-cold-start">Re-Evaluate Notebooks from a Cold Start</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#quantitative-statements-measure-don-t-just-claim">Quantitative Statements: Measure, don’t just Claim</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#arrays-while-and-list-comprehensions">Arrays, While and List-Comprehensions</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#chemical-potential">Chemical Potential</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overflows">Overflows</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extrapolation">Extrapolation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#integration">Integration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#range">μ Range</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sources-of-error">Sources of Error</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#temperature-and-units">Temperature and Units</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#absolute-vs-relative-errors">Absolute vs. Relative Errors</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#style-issues">Style Issues</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#action-at-a-distance">Action at a Distance</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-are-globals-ok">When are globals ok?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unused-or-trivial-variables">Unused or Trivial Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dry-don-t-repeat-yourself">DRY: Don’t repeat yourself</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#names">Names</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#astropy">Astropy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comments">Comments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#whitespace-and-empty-lines">Whitespace and Empty Lines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formatting">Formatting</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By <a href="https://www.physics.mcgill.ca/~cumming/">Andrew Cumming</a>
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, CC BY SA 4.0.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>